(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-53cb7333"],{"2ecd":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("VaDylist",{attrs:{api:t.api}})],1)},o=[],n=(a("ac6a"),a("cadf"),a("551c"),a("097d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",{attrs:{shadow:""}},[this.data_list.length>0?[t._l(t.list_data.top_button_list,function(e,i){return[a("Modal",{key:"top_modal_"+i,ref:"top_modal_"+i,refInFor:!0,attrs:{scrollable:"",draggable:"",width:e.page_data.width?e.page_data.width:600,title:e.page_data.title},model:{value:e.page_data.show,callback:function(a){t.$set(e.page_data,"show",a)},expression:"item.page_data.show"}},[a("VaDyform",{ref:"top_form_"+i,refInFor:!0,attrs:{api:e.page_data.api_blank,foot_hide:!0}}),a("div",{staticStyle:{"text-align":"left"},attrs:{slot:"footer"},slot:"footer"},[a("Button",{staticStyle:{"margin-right":"15px"},attrs:{loading:t.loading,type:"primary",size:"large"},on:{click:function(e){t.btnSubmit("top",i)}}},[t._v("确认提交")]),a("Button",{attrs:{type:"text",size:"large"},on:{click:function(e){t.btnCancel("top",i)}}},[t._v("取消操作")])],1)],1)]}),t._l(t.list_data.top_button_list,function(e,i){return a("Button",{key:"button"+i,staticStyle:{"margin-bottom":"15px"},attrs:{"empty-text":"当前没有数据",type:e.style.type?e.type:"default",shape:e.style.shape?e.shape:"circle",size:e.style.size?e.size:"default",icon:e.style.icon?e.icon:" "},on:{click:function(e){t.top_button_modal(i)}}},[t._v("\n              "+t._s(e.title)+"\n          ")])}),a("tree-table",{attrs:{"expand-key":"title","is-fold":!1,border:!0,stripe:!0,"expand-type":!1,selectable:!1,columns:t.list_data.columns,data:this.data_list},scopedSlots:t._u([{key:"right_button_list",fn:function(e){return t._l(t.list_data.right_button_list,function(i,o){return a("Button",{key:"button"+o,staticStyle:{"margin-right":"3px"},attrs:{type:i.style.type?i.type:"default",shape:i.style.shape?i.shape:"circle",size:i.style.size?i.size:"default",icon:i.style.icon?i.icon:" "},on:{click:function(a){t.right_button_modal(o,e)}}},[t._v("\n                      "+t._s(i.title)+"\n                  ")])})}}])}),t._l(t.list_data.right_button_list,function(e,i){return["form"==e.page_data.modal_type?[a("Modal",{key:"modal"+i,attrs:{scrollable:"",draggable:"",width:e.page_data.width?e.page_data.width:600,title:e.page_data.title},model:{value:e.page_data.show,callback:function(a){t.$set(e.page_data,"show",a)},expression:"item.page_data.show"}},[a("VaDyform",{ref:"right_form_"+i,refInFor:!0,attrs:{api:e.page_data.api_blank,foot_hide:!0}}),a("div",{staticStyle:{"text-align":"left"},attrs:{slot:"footer"},slot:"footer"},[a("Button",{staticStyle:{"margin-right":"15px"},attrs:{loading:t.loading,type:"primary",size:"large"},on:{click:function(e){t.btnSubmit("right",i)}}},[t._v("确认提交")]),a("Button",{attrs:{type:"text",size:"large"},on:{click:function(e){t.btnCancel("right",i)}}},[t._v("取消操作")])],1)],1)]:"list"==e.page_data.modal_type?[a("Modal",{key:"modal"+i,attrs:{scrollable:"",draggable:"",width:e.page_data.width?e.page_data.width:600,title:e.page_data.title},model:{value:e.page_data.show,callback:function(a){t.$set(e.page_data,"show",a)},expression:"item.page_data.show"}},[a("DynamicList",{ref:"right_form_"+i,refInFor:!0,attrs:{api:e.page_data.api_blank,foot_hide:!0}}),a("div",{staticStyle:{"text-align":"left"},attrs:{slot:"footer"},slot:"footer"},[a("Button",{staticStyle:{"margin-right":"15px"},attrs:{loading:t.loading,type:"primary",size:"large"},on:{click:function(e){t.btnSubmit("right",i)}}},[t._v("确认提交")]),a("Button",{attrs:{type:"text",size:"large"},on:{click:function(e){t.btnCancel("right",i)}}},[t._v("取消操作")])],1)],1)]:t._e()]})]:[a("Row",[a("Col",{staticClass:"spin-col",attrs:{span:"24"}},[a("Spin",{attrs:{fix:""}},[a("Icon",{staticClass:"spin-icon-load",attrs:{type:"ios-loading",size:"22"}}),a("div",[t._v("Loading")])],1)],1)],1)],a("div",{staticStyle:{"margin-top":"15px","text-align":"right","font-size":"12px",color:"#808695",transform:"scale(0.8)"}},[t._v("via iadypage")])],2)],1)}),r=[],s=(a("7f7f"),a("a481"),a("5d73")),l=a.n(s),c=a("f50c"),m={name:"DynamicList",props:{api:""},components:{VaDyform:c["a"]},data:function(){return{data_list:[],list_data:{top_button_list:{},right_button_list:{}}}},watch:{api:function(t){}},created:function(){this.loadData()},beforeMount:function(){},mounted:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},methods:{btnSubmit:function(t,e){this.$refs[t+"_form_"+e][0].submit()},btnCancel:function(t,e){this.$refs[t+"_form_"+e][0].cancel(),this.list_data[t+"_button_list"][e].page_data.show=!1},loadData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""!=t&&(this.api=t),this.api){var e=this;axios.get(this.api).then(function(t){t=t.data,"200"==t.code?(e.list_data=t.data.list_data,e.data_list=t.data.data_list):e.$Message.error(t.msg)}).catch(function(t){console.log(t)})}},top_button_modal:function(t){this.list_data.top_button_list[t].page_data.api_blank=this.list_data.top_button_list[t].page_data.api,this.list_data.top_button_list[t].page_data.show=!0,this.$refs["top_form_"+t][0].loadData(this.list_data.top_button_list[t].page_data.api_blank)},right_button_modal:function(t,e){var a=this,i=a.list_data.right_button_list[t],o="";if(a.list_data.right_button_list[t].page_data.api_suffix){var n=a.list_data.right_button_list[t].page_data.api_suffix,r=!0,s=!1,c=void 0;try{for(var m,u=l()(n);!(r=(m=u.next()).done);r=!0){var d=m.value;o=o+"/"+e.row[d]}}catch(f){s=!0,c=f}finally{try{r||null==u.return||u.return()}finally{if(s)throw c}}}else o="/"+e.row.id;if("replace"==i.page_data.page_type)a.$router.replace({path:i.page_data.route+"/"+e.row.name});else switch(i.page_data.modal_type){case"confirm":a.$Modal.confirm({okText:i.page_data.okText,cancelText:i.page_data.cancelText,title:i.page_data.title,content:i.page_data.content,onOk:function(){axios.delete(i.page_data.api+o).then(function(t){t=t.data,"200"==t.code?a.$Message.success(t.msg):a.$Message.error(t.msg)}).catch(function(t){console.log(t)})},onCancel:function(){}});break;case"list":a.list_data.right_button_list[t].page_data.api_blank=a.list_data.right_button_list[t].page_data.api+o,a.list_data.right_button_list[t].page_data.show=!0,console.log(a.$refs["right_form_"+t]),a.$refs["right_form_"+t][0].loadData(a.list_data.right_button_list[t].page_data.api_blank);break;default:a.list_data.right_button_list[t].page_data.api_blank=a.list_data.right_button_list[t].page_data.api+o,a.list_data.right_button_list[t].page_data.show=!0,a.$refs["right_form_"+t][0].loadData(a.list_data.right_button_list[t].page_data.api_blank);break}}}},u=m,d=(a("5fcd"),a("2877")),f=Object(d["a"])(u,n,r,!1,null,null,null);f.options.__file="va_dylist.vue";var _=f.exports,p={name:"va_dylist_route",components:{VaDylist:_},data:function(){return{api:""}},created:function(){},beforeMount:function(){this.loadData()},methods:{loadData:function(){if("dylist"==this.$route.meta.dytype){var t=this,e=this.$route.params.length;e>0?(this.$route.params.forEach(function(e){t.$route.meta.api=t.$route.meta.api+"/"+t.$route.params[e]}),t.api=t.$route.meta.api):t.api=t.$route.meta.api}}},watch:{$route:function(){this.loadData()}}},h=p,v=Object(d["a"])(h,i,o,!1,null,null,null);v.options.__file="va_dylist_route.vue";e["default"]=v.exports},"5fcd":function(t,e,a){"use strict";var i=a("b0be"),o=a.n(i);o.a},"80b4":function(t,e,a){},"9d12":function(t,e,a){"use strict";var i=a("80b4"),o=a.n(i);o.a},a481:function(t,e,a){"use strict";var i=a("cb7c"),o=a("4bf8"),n=a("9def"),r=a("4588"),s=a("0390"),l=a("5f1b"),c=Math.max,m=Math.min,u=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,f=/\$([$&`']|\d\d?)/g,_=function(t){return void 0===t?t:String(t)};a("214f")("replace",2,function(t,e,a,p){return[function(i,o){var n=t(this),r=void 0==i?void 0:i[e];return void 0!==r?r.call(i,n,o):a.call(String(n),i,o)},function(t,e){var o=p(a,t,this,e);if(o.done)return o.value;var u=i(t),d=String(this),f="function"===typeof e;f||(e=String(e));var v=u.global;if(v){var g=u.unicode;u.lastIndex=0}var b=[];while(1){var y=l(u,d);if(null===y)break;if(b.push(y),!v)break;var x=String(y[0]);""===x&&(u.lastIndex=s(d,n(u.lastIndex),g))}for(var k="",w=0,$=0;$<b.length;$++){y=b[$];for(var S=String(y[0]),D=c(m(r(y.index),d.length),0),C=[],z=1;z<y.length;z++)C.push(_(y[z]));var I=y.groups;if(f){var M=[S].concat(C,D,d);void 0!==I&&M.push(I);var F=String(e.apply(void 0,M))}else F=h(S,d,D,C,I,e);D>=w&&(k+=d.slice(w,D)+F,w=D+S.length)}return k+d.slice(w)}];function h(t,e,i,n,r,s){var l=i+t.length,c=n.length,m=f;return void 0!==r&&(r=o(r),m=d),a.call(s,m,function(a,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,i);case"'":return e.slice(l);case"<":s=r[o.slice(1,-1)];break;default:var m=+o;if(0===m)return a;if(m>c){var d=u(m/10);return 0===d?a:d<=c?void 0===n[d-1]?o.charAt(1):n[d-1]+o.charAt(1):a}s=n[m-1]}return void 0===s?"":s})}})},b0be:function(t,e,a){},f50c:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-wrapper"},[""!=this.data?[a("Form",{ref:t.ref,attrs:{model:t.data.form_values,"label-position":t.label_position,"label-width":t.label_width,rules:t.data.form_rules},nativeOn:{submit:function(t){t.preventDefault()}}},[t._l(t.data.form_items,function(e,i,o){return[""!=t.data.form_rules[e.name]?[a("VaDyformItem",{key:o,ref:"dyformitem_"+e.name,refInFor:!0,attrs:{item:e,form_values:t.data.form_values,prop:e.name}})]:""==t.data.form_rules[e.name]?[a("VaDyformItem",{key:o,ref:"dyformitem_"+e.name,refInFor:!0,attrs:{item:e,form_values:t.data.form_values}})]:t._e()]}),0==t.foot_hide?a("div",[a("Divider"),a("FormItem",{staticStyle:{"text-align":"left"}},[a("Button",{staticStyle:{"margin-right":"15px"},attrs:{loading:t.loading,type:"primary",size:"large"},on:{click:function(e){t.submit()}}},[t._v("确认提交")]),a("Button",{attrs:{type:"text",size:"large"},on:{click:function(e){t.cancel()}}},[t._v("取消操作")])],1)],1):t._e()],2)]:[a("Row",[a("Col",{staticClass:"spin-col",attrs:{span:"24"}},[a("Spin",{attrs:{fix:""}},[a("Icon",{staticClass:"spin-icon-load",attrs:{type:"ios-loading",size:"22"}}),a("div",[t._v("Loading")])],1)],1)],1)]],2)},o=[],n=a("795b"),r=a.n(n),s=(a("7f7f"),a("cadf"),a("551c"),a("097d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("FormItem",{attrs:{label:t.item.title,prop:t.prop}},["divider"==t.item.type?[a("Divider")]:t._e(),"static"==t.item.type?[a("span",[t._v(t._s(t.item.value))])]:t._e(),"text"==t.item.type?[a("Input",{attrs:{placeholder:t.item.extra.placeholder},model:{value:t.form_values[t.item.name],callback:function(e){t.$set(t.form_values,t.item.name,e)},expression:"form_values[item.name]"}})]:"textarea"==t.item.type?[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:t.item.extra.placeholder},model:{value:t.form_values[t.item.name],callback:function(e){t.$set(t.form_values,t.item.name,e)},expression:"form_values[item.name]"}})]:"array"==t.item.type?[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:t.item.extra.placeholder},model:{value:t.form_values[t.item.name],callback:function(e){t.$set(t.form_values,t.item.name,e)},expression:"form_values[item.name]"}})]:"select"==t.item.type?[a("Select",{model:{value:t.form_values[t.item.name],callback:function(e){t.$set(t.form_values,t.item.name,e)},expression:"form_values[item.name]"}},t._l(t.item.extra.options,function(e,i,o){return a("Option",{key:o,attrs:{value:e.value}},[t._v("\n                  "+t._s(e.title)+"\n              ")])}),1)]:"radio"==t.item.type?[a("RadioGroup",{model:{value:t.form_values[t.item.name],callback:function(e){t.$set(t.form_values,t.item.name,e)},expression:"form_values[item.name]"}},t._l(t.item.extra.options,function(e,i,o){return a("Radio",{key:o,attrs:{label:e.value}},[a("span",[t._v(t._s(e.title))])])}),1)]:"checkbox"==t.item.type?[a("CheckboxGroup",{model:{value:t.form_values[t.item.name],callback:function(e){t.$set(t.form_values,t.item.name,e)},expression:"form_values[item.name]"}},t._l(t.item.extra.options,function(t,e,i){return a("Checkbox",{key:i,attrs:{label:t.title}})}),1)]:"switch"==t.item.type?[a("i-switch",{attrs:{size:"large"},model:{value:t.form_values[t.item.name],callback:function(e){t.$set(t.form_values,t.item.name,e)},expression:"form_values[item.name]"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t.item1.extra.options[0].title))]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t.item1.extra.options[1].title))])])]:"slider"==t.item.type?[a("Slider",{attrs:{range:""},model:{value:t.form_values[t.item.name],callback:function(e){t.$set(t.form_values,t.item.name,e)},expression:"form_values[item.name]"}})]:"datepicker"==t.item.type?[a("DatePicker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.iform_values[t.item.name],callback:function(e){t.$set(t.iform_values,t.item.name,e)},expression:"iform_values[item.name]"}})]:"timepicker"==t.item.type?[a("TimePicker",{attrs:{type:"time",placeholder:"选择时间"},model:{value:t.form_values[t.item.name],callback:function(e){t.$set(t.form_values,t.item.name,e)},expression:"form_values[item.name]"}})]:"datetimepicker"==t.item.type?[a("Row",[a("Col",{attrs:{span:"11"}},[a("DatePicker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.form_values[t.item.name][0],callback:function(e){t.$set(t.form_values[t.item.name],0,e)},expression:"form_values[item.name][0]"}})],1),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}},[t._v("-")]),a("Col",{attrs:{span:"11"}},[a("TimePicker",{attrs:{type:"time",placeholder:"选择时间"},model:{value:t.form_values[t.item.name][1],callback:function(e){t.$set(t.form_values[t.item.name],1,e)},expression:"form_values[item.name][1]"}})],1)],1)]:"rate"==t.item.type?[a("Rate",{model:{value:t.form_values[t.item.name],callback:function(e){t.$set(t.form_values,t.item.name,e)},expression:"form_values[item.name]"}})]:"cascader"==t.item.type?[a("Cascader",{attrs:{data:t.item.extra.options,size:"large"},model:{value:t.form_values[t.item.name],callback:function(e){t.$set(t.form_values,t.item.name,e)},expression:"form_values[item.name]"}})]:"colorpicker"==t.item.type?[a("ColorPicker",{model:{value:t.form_values[t.item.name],callback:function(e){t.$set(t.form_values,t.item.name,e)},expression:"form_values[item.name]"}})]:"file"==t.item.type?[a("Upload",{attrs:{type:"drag",action:t.item.action}},[a("div",{staticStyle:{padding:"20px 0"}},[a("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"42"}}),a("p",[t._v("点击或者拖动文件到此处上传")])],1)])]:"files"==t.item.type?[a("Upload",{attrs:{multiple:"",type:"drag",action:t.item.action}},[a("div",{staticStyle:{padding:"20px 0"}},[a("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"42"}}),a("p",[t._v("点击或者拖动文件到此处上传")])],1)])]:"checkboxtree"==t.item.type?[a("tree-table",{ref:"checkboxtree_"+t.item.name,attrs:{"expand-key":t.item.extra.expand-t.key,"is-fold":!0,border:!0,stripe:!1,selectable:!0,"expand-type":!1,"selection-type":t.checkbox,columns:t.item.extra.columns,data:t.item.extra.data}})]:"formlist"==t.item.type?[a("Row",t._l(t.item.extra.options,function(e,i,o){return a("div",{key:o},[a("Col",{attrs:{span:e.span}},[t._v("\n                      "+t._s(e.title)+"\n                  ")])],1)}),0),t._l(t.form_values[t.item.name],function(e,i,o){return a("Row",{key:o},[t._l(t.item.extra.options,function(e,o,n){return a("div",{key:n},[a("Col",{attrs:{span:e.span}},[a("Input",{model:{value:t.form_values[t.item.name][i][e.value],callback:function(a){t.$set(t.form_values[t.item.name][i],e.value,a)},expression:"form_values[item.name][key2][item3.value]"}})],1)],1)}),a("Button",{attrs:{type:"dashed"},on:{click:function(e){t.formlist_delrow(t.item.name)}}},[t._v("删除")])],2)}),a("Button",{staticStyle:{"margin-top":"8px"},attrs:{type:"dashed",icon:"md-add"},on:{click:function(e){t.formlist_addrow(t.item.name)}}},[t._v("增加一行")])]:t._e(),a("div",{staticStyle:{color:"#aaa","font-size":"12px"}},[t._v(t._s(t.item.extra.tip))])],2)],1)}),l=[],c={name:"va_dyform_item",props:{prop:"",item:{},form_values:{}},created:function(){},beforeMount:function(){},methods:{formlist_addrow:function(t){this.form_values[t].push(new Object)},getChecked:function(t){return this.$refs["checkboxtree_"+this.item.name].getCheckedProp(t)}},watch:{}},m=c,u=a("2877"),d=Object(u["a"])(m,s,l,!1,null,null,null);d.options.__file="va_dyform_item.vue";var f=d.exports,_={name:"DynamicForm",components:{VaDyformItem:f},props:{api:"",foot_hide:!1},data:function(){return{loading:!1,ref:"form",data:"",label_position:"right",label_width:100}},created:function(){this.ref="form_"+(new Date).getTime()},beforeMount:function(){},mounted:function(){this.loadData()},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},computed:{},methods:{loadData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""!=t&&(this.api=t),this.api){var e=this;axios.get(this.api).then(function(t){t=t.data,"200"==t.code?(0==t.data.form_data.form_rules.length&&(t.data.form_data.form_rules=new Object),e.data=t.data.form_data):e.$Message.error(t.msg)}).catch(function(t){console.log(t)})}},submit:function(){this.loading=!0;var t=this;for(var e in t.data.form_items)if("checkboxtree"==t.data.form_items[e].type){var a=t.$refs["dyformitem_"+t.data.form_items[e].name][0].getChecked("admin_auth");t.data.form_values[t.data.form_items[e].name]=a}if(0==this.data.form_rules.length)return this.submitForm();this.$refs[t.ref].validate(function(e){if(e)return t.submitForm()})},submitForm:function(){var t=this,e=this;switch(this.data.form_method){case"post":return new r.a(function(a,i){axios.post(t.api,t.data.form_values).then(function(t){t=t.data,"200"==t.code?(e.$Message.success(t.msg),e.$Modal.remove()):e.$Message.error(t.msg),e.loading=!1,a(t)}).catch(function(t){e.loading=!1,i(t)})});case"put":axios.put(this.api,this.data.form_values).then(function(t){if(t=t.data,"200"==t.code)return e.$Message.success(t.msg),e.$Modal.remove(),!0;e.$Message.error(t.msg),e.loading=!1}).catch(function(t){console.log(t),e.loading=!1});break;default:e.$Message.error("form_method不存在"),e.loading=!1;break}},cancel:function(){this.$refs[this.ref].resetFields()}},watch:{api:function(){this.loadData()}}},p=_,h=(a("9d12"),Object(u["a"])(p,i,o,!1,null,null,null));h.options.__file="va_dyform.vue";e["a"]=h.exports}}]);